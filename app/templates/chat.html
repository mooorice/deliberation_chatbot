<!DOCTYPE html>
<html lang="en">


    <head>
        <!-- Existing head content -->
        <link rel="stylesheet" type="text/css" href="/static/css/chat.css">
    </head>

    <body>

        <body>
            <div id="chat-container"></div>

            <form id="chat-form">
                <input type="text" name="user_input" id="user-input" placeholder="Type your message..." required>
                <button type="submit">Send</button>
            </form>

            <script>
                // Fetch chat history on page load
                document.getElementById('chat-form').addEventListener('submit', function (event) {
                    event.preventDefault();
                    const userInput = document.getElementById('user-input').value;
                    fetch('/chat', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/x-www-form-urlencoded',
                        },
                        body: `user_input=${encodeURIComponent(userInput)}`
                    })
                        .then(response => response.json())
                        .then(data => {
                            // Update chat container with new history
                            const chatContainer = document.getElementById('chat-container');
                            chatContainer.innerHTML = '';
                            data.chat_history.forEach(message => {
                                const messageDiv = document.createElement('div');
                                messageDiv.textContent = message;
                                chatContainer.appendChild(messageDiv);
                            });
                        })
                        .catch(error => console.error('Error:', error));
                });
            </script>
        </body>

</html>